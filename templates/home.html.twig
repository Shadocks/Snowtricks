{% extends 'base.html.twig' %}

{% block header %}
    <header>
        <div class="wrapper">
            <div class="content">
                <h1>Hello et bienvenue !</h1>
                <p class="subtitle">Que vous soyez amateur ou expérimenté, Snowtricks est le site communautaire de référence en terme de tricks.</br>
                    Alors n'attendez pas plus longtemps et allez consulter les tricks.</p>
                <p>Pour profiter pleinement du site nous vous invitons à créer un compte utilisateur.</p>
                <a class="button" href="#trick-view"><span class="glyphicon glyphicon-chevron-down" style="font-size: 300%"></span></a>
            </div>
        </div>
    </header>
{% endblock header %}

{% block body %}
    <div class="container">
        {% for message in app.flashes('success') %}
            <div class="flash-success">
                <div class="alert alert-success alert-dismissible fade in">
                    <a href="#" class="close" data-dismiss="alert" aria-label="close">&times;</a>
                    <strong>{{ message }}</strong>
                </div>
            </div>
        {% endfor %}
    </div>
    <div class="container">
        {% for message in app.flashes('failure') %}
            <div class="flash-failure">
                <div class="alert alert-warning alert-dismissible fade in">
                    <a href="#" class="close" data-dismiss="alert" aria-label="close">&times;</a>
                    <strong>{{ message }}</strong>
                </div>
            </div>
        {% endfor %}
    </div>

    <div class="container home">
        <div class="row">
            {% for trick in tricks %}
                <div class="col-xs-12 col-sm-6 col-lg-3 trick">
                    {% for picture in trick.picture|slice(0, 1) %}
                        {% if picture.url %}
                            <img class="img-rounded imgTrick" src="{{ picture.url}}">
                        {% endif %}
                    {% endfor %}

                    <div class="titleTrick">
                        <a type="button" class="btn btn-default btnDetail" href="{{ path('trick_detail', {'id': trick.id}) }}">{{ trick.name }}</a>
                        {% if is_granted('ROLE_USER') %}
                            <a type="button" class="btn btn-default" aria-label="Pencil" href="{{ path('trick_update', {'id': trick.id}) }}">
                                <span class="glyphicon glyphicon-pencil" aria-hidden="true"></span>
                            </a>

                            <button type="button" class="btn btn-default btnDelete" aria-label="Trash"
                                    data-toggle="modal"
                                    data-target="#removeTrickModal"
                                    data-href="{{ path('trick_delete', {'id': trick.id}) }}"
                                    data-name="{{ trick.name }}">
                                <span class="glyphicon glyphicon-trash" aria-hidden="true"></span>
                            </button>

                        {% endif %}
                    </div>
                </div>
            {% endfor %}
        </div>
    </div>

    <div class="wrap-button">
        <button href="" id="loadMore" class="btn btn-primary">Voir plus</button>
    </div>

    <div class="modal fade" id="removeTrickModal" role="dialog">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                    <h4 class="modal-title" id="myModalLabel">Suppression</h4>
                </div>
                <div class="modal-body">
                    <p>Êtes-vous sûr de vouloir supprimer ce trick ?</p>
                </div>
                <div class="modal-footer">
                    <a class="btn btn-danger" href="">Oui</a>
                    <a class="btn btn-primary" data-dismiss="modal">Non</a>
                </div>
            </div>
        </div>
    </div>

{% endblock body %}

{% block javascripts %}
    <script src="/js/home" type="text/javascript"></script>
{% endblock %}
