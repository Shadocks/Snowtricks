{% extends 'base.html.twig' %}

{% block body %}
        <!------------------------------- TRICK -------------------------------->

    <div class="container">

        <h3>{{ trick.name }}</h3>
        <p>{{ trick.description }}</p>
        <p>{{ trick.creationDate|date }} | {{ trick.category }}</p>

        {% for picture in trick.picture %}
            {% if picture.url %}
            <img src="{{ picture.url }}">
                {% endif %}
        {% endfor %}

        {% for video in trick.video %}
            {% if video.url %}
            <iframe width="854" height="480" src="{{ video.url|urlVideoPlay(video.url) }}" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe>
                {% endif %}
        {% endfor %}

        <!------------------------------- MESSAGES ----------------------------->

        {% for message in app.flashes('success') %}
            <div class="flash-success">
                <div class="alert alert-success alert-dismissible fade in">
                    <a href="#" class="close" data-dismiss="alert" aria-label="close">&times;</a>
                    <strong>{{ message }}</strong>
                </div>
            </div>
        {% endfor %}

        <!--------------------------- ACTION / TRICK --------------------------->

        {% if is_granted('ROLE_USER') %}
        <a type="button" class="btn btn-default" aria-label="Pencil" href="{{ path('trick_update', {'id': trick.id }) }}">
            <span class="glyphicon glyphicon-pencil" aria-hidden="true"></span>
        </a>

        <button type="button" class="btn btn-default" aria-label="Trash" data-toggle="modal" data-target="#removeTrickModal">
            <span class="glyphicon glyphicon-trash" aria-hidden="true"></span>
        </button>
        {% endif %}

        <!--------------------------- MODAL / DELETE --------------------------->

        <div class="modal fade" id="removeTrickModal" role="dialog">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                        <h4 class="modal-title" id="myModalLabel">Suppression</h4>
                    </div>
                    <div class="modal-body">
                        Êtes-vous sûr de vouloir supprimer {{ trick.name }} ?
                    </div>
                    <div class="modal-footer">
                        <a class="btn btn-danger" href="{{ path('trick_delete', {'id': trick.id }) }}">Oui</a>
                        <a class="btn btn-primary" data-dismiss="modal">Non</a>
                    </div>
                </div>
            </div>
        </div>

        <!--------------------------- FORM COMMENT --------------------------->

        {% if is_granted('ROLE_USER') %}
        <div class="container-form-comment">
            <h3>Laisser un commentaire</h3>
                {{ form_start(form, {'attr': {'class': 'form-horizontal'}}) }}
                    <div class="form-group">
                        <div>
                            {{ form_label(form.content, 'Message') }}
                            <div class="col-lg-12">
                                {{ form_widget(form.content) }}
                            </div>
                        </div>
                    </div>
                    <button type="submit" class="btn btn-primary">Poster</button>
                {{ form_end(form) }}
        </div>
        {% endif %}

        <!--------------------------- COMMENT FILE --------------------------->

        <div class="container-comment-file">
            <h3>Commentaires</h3>

            {% for comment in trick.comment %}
                <p><strong>{{ comment.user.username }}</strong> a posté :</p>
                <div><img src="{{ comment.user.picture.url }}"></div>
                <p>{{ comment.content }}</p>
                <p>{{ comment.creationDate|date }}</p>
            {% endfor %}
        </div>

    </div>
{% endblock %}